<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Create_s3_bucket :: RHACM Workshop</title>

    
    <link href="/css/nucleus.css?1698352364" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1698352364" rel="stylesheet">
    <link href="/css/hybrid.css?1698352364" rel="stylesheet">
    <link href="/css/featherlight.min.css?1698352364" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1698352364" rel="stylesheet">
    <link href="/css/auto-complete.css?1698352364" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1698352364" rel="stylesheet">
    <link href="/css/theme.css?1698352364" rel="stylesheet">
    <link href="/css/tabs.css?1698352364" rel="stylesheet">
    <link href="/css/hugo-theme.css?1698352364" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1698352364"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/04_observability/01_create_s3_bucket/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://rhacm-ws.nomiras.com/">
	  <img src="/images/logo.png">
</a>


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1698352364"></script>
<script type="text/javascript" src="/js/auto-complete.js?1698352364"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/rhacm-ws.nomiras.com\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1698352364"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/" title="Cluster Lifecycle" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/">
          Cluster Lifecycle
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/01_new_cluster/" title="Create a new cluster" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/01_new_cluster/">
          Create a new cluster
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/02_new_sno/" title="New Single Node" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/02_new_sno/">
          New Single Node
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/03_hosted_control_plane/" title="Create Hosted Control Plane" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/03_hosted_control_plane/">
          Create Hosted Control Plane
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/02_application_lifecycle/" title="Application Lifecycle" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/">
          Application Lifecycle
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/01_create_app/" title="Create App - Application Lifecycle" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/01_create_app/">
          Create App - Application Lifecycle
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/02_deploy_aap/" title="Deploy Ansible Automation Platform 2 (AAP2)" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/02_deploy_aap/">
          Deploy Ansible Automation Platform 2 (AAP2)
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/03_deploy_snow_dev/" title="Deploy a Service Now Developer Instance" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/03_deploy_snow_dev/">
          Deploy a Service Now Developer Instance
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/04_snow_change_request/" title="Trigger a ServiceNow Change Request via Ansible" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/04_snow_change_request/">
          Trigger a ServiceNow Change Request via Ansible
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/05_create_aap_creds/" title="Create Ansible Automation Platform Credentials" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/05_create_aap_creds/">
          Create Ansible Automation Platform Credentials
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/06_integrated_app_deployment/" title="Integrated Application Deployment [ACM/AAP2] " class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/06_integrated_app_deployment/">
          Integrated Application Deployment [ACM/AAP2] 
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/03_governance/" title="RHACM Governance" class="dd-item
        
        
        
        ">
      <a href="/03_governance/">
          RHACM Governance
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/03_governance/01_rhacm_policies/" title="RHACM Policies" class="dd-item
        
        
        
        ">
      <a href="/03_governance/01_rhacm_policies/">
          RHACM Policies
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/04_observability/" title="Observability" class="dd-item
        parent
        
        
        ">
      <a href="/04_observability/">
          Observability
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/04_observability/02_grafana_integration/" title="Grafana Integration" class="dd-item
        
        
        
        ">
      <a href="/04_observability/02_grafana_integration/">
          Grafana Integration
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/04_observability/01_create_s3_bucket/" title="Create_s3_bucket" class="dd-item
        
        active
        
        ">
      <a href="/04_observability/01_create_s3_bucket/">
          Create_s3_bucket
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/06_appendix/" title="Appendix" class="dd-item
        
        
        
        ">
      <a href="/06_appendix/">
          Appendix
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/06_appendix/01_import_kubernetes_cluster/" title="Import Kubernetes" class="dd-item
        
        
        
        ">
      <a href="/06_appendix/01_import_kubernetes_cluster/">
          Import Kubernetes
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>RHACM</a> > <a href='/04_observability/'>Observability</a> > Create_s3_bucket
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Create_s3_bucket
            </h1>
          

        



	<p>End to End Visibility (Observability use case)
View system alerts, critical application metrics, and overall system health. Search, identify, and
resolve issues that are impacting distributed workloads using an operational dashboard
designed for Site Reliability Engineers (SREs). This is done via the integration of Grafana.
Let&rsquo;s walk through the steps to integrate Grafana with ACM.
You will need your AWS Keys. (from RHDP system email)
You will also need to create an AWS S3 bucket.
SSH information to your bastion host. (from RHDP system email)
Create the S3 bucket</p>
<ul>
<li>Login to the bastion host.</li>
<li>Run the following command to login to AWS:
<code>aws configure</code>
and enter your AWS keys when prompted. Default region: <code>us-east-2</code></li>
</ul>
<p>Then run the following command to create the S3 bucket:
<code>aws s3 mb s3://grafana-$GUID</code></p>
<p>Please take note of the bucket name.</p>
<p>Integrate Grafana into ACM</p>
<ul>
<li>Login to the bastion host host.</li>
<li>Create a namespace by running the following command:
<code>oc create namespace open-cluster-management-observability</code></li>
</ul>
<p>Copy the pull secret into this new namespace by running the following TWO
commands:</p>
<p><code>DOCKER_CONFIG_JSON=&quot;oc extract secret/pull-secret -n openshift-config --to=-&quot;</code></p>
<p><code>oc create secret generic multiclusterhub-operator-pull-secret -n open-cluster-management-observability --from-literal=.dockerconfigjson=&quot;$DOCKER_CONFIG_JSON&quot; --type=kubernetes.io/dockerconfigjson</code></p>
<p>In your current folder create a file called thanos-object-storage.yaml and add the
following text in the file. Please be sure to update your S3 bucket name and AWS
Keys</p>
<pre tabindex="0"><code class="language-apiVersion:" data-lang="apiVersion:">kind: Secret
metadata:
name: thanos-object-storage
type: Opaque
stringData:
thanos.yaml: |
type: s3
config:
bucket: YOUR_S3_BUCKET
endpoint: s3.amazonaws.com
insecure: false
access_key: YOUR_ACCESS_KEY
secret_key: YOUR_SECRET_KEY```


- Create a secret for your object storage by running the following command:
```oc create -f thanos-object-storage.yaml -n open-cluster-management-observability```

Create the MultiClusterObservability custom resource for your managed clusters. 
To do this create a YAML file named &#34;multiclusterobservability_cr.yaml&#34;


```kind: MultiClusterObservability
apiVersion: observability.open-cluster-management.io/v1beta2
metadata:
name: observability
spec:
observabilityAddonSpec: {}
storageConfig:
metricObjectStorage:
key: thanos.yaml
name: thanos-object-storage```
</code></pre>




<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/04_observability/02_grafana_integration/" title="Grafana Integration"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/06_appendix/" title="Appendix" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1698352364"></script>
    <script src="/js/perfect-scrollbar.min.js?1698352364"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1698352364"></script>
    <script src="/js/jquery.sticky.js?1698352364"></script>
    <script src="/js/featherlight.min.js?1698352364"></script>
    <script src="/js/highlight.pack.js?1698352364"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1698352364"></script>
    <script src="/js/learn.js?1698352364"></script>
    <script src="/js/hugo-learn.js?1698352364"></script>
    
        
            <script src="/mermaid/mermaid.js?1698352364"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
