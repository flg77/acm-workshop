<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Grafana_integration :: RHACM Workshop</title>

    
    <link href="/css/nucleus.css?1698222291" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1698222291" rel="stylesheet">
    <link href="/css/hybrid.css?1698222291" rel="stylesheet">
    <link href="/css/featherlight.min.css?1698222291" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1698222291" rel="stylesheet">
    <link href="/css/auto-complete.css?1698222291" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1698222291" rel="stylesheet">
    <link href="/css/theme.css?1698222291" rel="stylesheet">
    <link href="/css/tabs.css?1698222291" rel="stylesheet">
    <link href="/css/hugo-theme.css?1698222291" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1698222291"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/04_observability/grafana_integration/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://rhacm-ws.nomiras.com/">
	  <img src="/logo.png">
</a>


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1698222291"></script>
<script type="text/javascript" src="/js/auto-complete.js?1698222291"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/rhacm-ws.nomiras.com\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1698222291"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/appendix/" title="Appendices" class="dd-item
        
        
        
        ">
      <a href="/appendix/">
          Appendices
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/appendix/import_kubernetes/" title="Import Kubernetes" class="dd-item ">
        <a href="/appendix/import_kubernetes/">
        Import Kubernetes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/05_use_cases/" title="05_use_cases" class="dd-item
        
        
        
        ">
      <a href="/05_use_cases/">
          05_use_cases
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/05_use_cases/visibility_overview/" title="Visibility Overview" class="dd-item ">
        <a href="/05_use_cases/visibility_overview/">
        Visibility Overview
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/04_observability/" title="04_observabilities" class="dd-item
        parent
        
        
        ">
      <a href="/04_observability/">
          04_observabilities
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/04_observability/grafana_integration/" title="Grafana_integration" class="dd-item active">
        <a href="/04_observability/grafana_integration/">
        Grafana_integration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/04_observability/create_s3_bucket/" title="Create_s3_bucket" class="dd-item ">
        <a href="/04_observability/create_s3_bucket/">
        Create_s3_bucket
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/03_governance/" title="03_governances" class="dd-item
        
        
        
        ">
      <a href="/03_governance/">
          03_governances
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/03_governance/rhacm_policies/" title="Rhacm_policies" class="dd-item ">
        <a href="/03_governance/rhacm_policies/">
        Rhacm_policies
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/02_application_lifecycle/" title="02_application_lifecycles" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/">
          02_application_lifecycles
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/02_application_lifecycle/create_app/" title="Create App - Application Lifecycle" class="dd-item ">
        <a href="/02_application_lifecycle/create_app/">
        Create App - Application Lifecycle
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/02_application_lifecycle/deploy_aap2/" title="Deploy_aap2" class="dd-item ">
        <a href="/02_application_lifecycle/deploy_aap2/">
        Deploy_aap2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/02_application_lifecycle/deploy_servicenow_dev/" title="Deploy_servicenow_dev" class="dd-item ">
        <a href="/02_application_lifecycle/deploy_servicenow_dev/">
        Deploy_servicenow_dev
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/02_application_lifecycle/deploy_snow_aap_integrate/" title="Deploy_snow_aap_integrate" class="dd-item ">
        <a href="/02_application_lifecycle/deploy_snow_aap_integrate/">
        Deploy_snow_aap_integrate
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/02_application_lifecycle/deploy_aap_creds_acm/" title="Deploy_aap_creds_acm" class="dd-item ">
        <a href="/02_application_lifecycle/deploy_aap_creds_acm/">
        Deploy_aap_creds_acm
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/02_application_lifecycle/integrated_app_deployment/" title="Integrated_app_deployment" class="dd-item ">
        <a href="/02_application_lifecycle/integrated_app_deployment/">
        Integrated_app_deployment
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/" title="01_cluster_lifecycles" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/">
          01_cluster_lifecycles
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/01_cluster_lifecycle/new_cluster/" title="Create a new cluster" class="dd-item ">
        <a href="/01_cluster_lifecycle/new_cluster/">
        Create a new cluster
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/01_cluster_lifecycle/new_sno/" title="New Single Node" class="dd-item ">
        <a href="/01_cluster_lifecycle/new_sno/">
        New Single Node
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/01_cluster_lifecycle/new_hosted_control_plane/" title="Create Hosted Control Plane" class="dd-item ">
        <a href="/01_cluster_lifecycle/new_hosted_control_plane/">
        Create Hosted Control Plane
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>RHACM Workshop</a> > <a href='/04_observability/'>04_observabilities</a> > Grafana_integration
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Grafana_integration
            </h1>
          

        


<p>Integrate Grafana into ACM</p>
<ul>
<li>Login to the bastion host host.</li>
<li>Create a namespace by running the following command:
<code>oc create namespace open-cluster-management-observability</code></li>
</ul>
<p>Copy the pull secret into this new namespace by running the following TWO
commands:</p>
<p><code>DOCKER_CONFIG_JSON=`oc extract secret/pull-secret -n openshift-config --to=-</code></p>
<pre tabindex="0"><code class="language-oc" data-lang="oc">open-cluster-management-observability
--from-literal=.dockerconfigjson=&#34;$DOCKER_CONFIG_JSON&#34;
--type=kubernetes.io/dockerconfigjson
</code></pre><ul>
<li>In your current folder create a file called thanos-object-storage.yaml and add the
following text in the file. Please be sure to update your S3 bucket name and AWS
Keys</li>
</ul>
<pre tabindex="0"><code>apiVersion: v1
kind: Secret
metadata:
name: thanos-object-storage
type: Opaque
stringData:
thanos.yaml: |
type: s3
config:
bucket: YOUR_S3_BUCKET
endpoint: s3.amazonaws.com
insecure: false
access_key: YOUR_ACCESS_KEY
secret_key: YOUR_SECRET_KEY
</code></pre><ul>
<li>Create a secret for your object storage by running the following command:</li>
</ul>
<p><code>oc create -f thanos-object-storage.yaml -n open-cluster-management-observability</code></p>
<ul>
<li>Create the MultiClusterObservability custom resource for your managed clusters. To do
this create a YAML file named multiclusterobservability_cr.yaml</li>
</ul>
<pre tabindex="0"><code class="language-kind:" data-lang="kind:">apiVersion: observability.open-cluster-management.io/v1beta2
metadata:
name: observability
spec:
observabilityAddonSpec: {}
storageConfig:
metricObjectStorage:
key: thanos.yaml
name: thanos-object-storage```


Note: This is the default operation. There are multiple other optional fields to customize this resource. If
you want to change optional parameters like retentionResolution, storageClass to use, etc., please check
the API reference.


- Apply the observability YAML to your cluster by running the following command:

```oc apply -f multiclusterobservability_cr.yaml```

- Log in to the ACM console, and navigate to Observe environments -&gt; Overview.

- Click on the Grafana link in the top right to view the metrics from the managed clusters.
** Please note:** it will take a few minutes for the metrics to become visible on the
dashboard.

![Grafana Cluster](/401_1.png)
</code></pre>

<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/04_observability/" title="04_observabilities"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/04_observability/create_s3_bucket/" title="Create_s3_bucket" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1698222292"></script>
    <script src="/js/perfect-scrollbar.min.js?1698222292"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1698222292"></script>
    <script src="/js/jquery.sticky.js?1698222292"></script>
    <script src="/js/featherlight.min.js?1698222292"></script>
    <script src="/js/highlight.pack.js?1698222292"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1698222292"></script>
    <script src="/js/learn.js?1698222292"></script>
    <script src="/js/hugo-learn.js?1698222292"></script>
    
        
            <script src="/mermaid/mermaid.js?1698222292"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

