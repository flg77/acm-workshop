<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Deploy Ansible Automation Platform 2 (AAP2) :: RHACM Workshop</title>

    
    <link href="/css/nucleus.css?1698350138" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1698350138" rel="stylesheet">
    <link href="/css/hybrid.css?1698350138" rel="stylesheet">
    <link href="/css/featherlight.min.css?1698350138" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1698350138" rel="stylesheet">
    <link href="/css/auto-complete.css?1698350138" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1698350138" rel="stylesheet">
    <link href="/css/theme.css?1698350138" rel="stylesheet">
    <link href="/css/tabs.css?1698350138" rel="stylesheet">
    <link href="/css/hugo-theme.css?1698350138" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1698350138"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/02_application_lifecycle/02_deploy_aap/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://rhacm-ws.nomiras.com/">
	  <img src="/images/logo.png">
</a>


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1698350138"></script>
<script type="text/javascript" src="/js/auto-complete.js?1698350138"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/rhacm-ws.nomiras.com\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1698350138"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/" title="Cluster Lifecycle" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/">
          Cluster Lifecycle
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/01_new_cluster/" title="Create a new cluster" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/01_new_cluster/">
          Create a new cluster
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/02_new_sno/" title="New Single Node" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/02_new_sno/">
          New Single Node
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/01_cluster_lifecycle/03_hosted_control_plane/" title="Create Hosted Control Plane" class="dd-item
        
        
        
        ">
      <a href="/01_cluster_lifecycle/03_hosted_control_plane/">
          Create Hosted Control Plane
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/02_application_lifecycle/" title="Application Lifecycle" class="dd-item
        parent
        
        
        ">
      <a href="/02_application_lifecycle/">
          Application Lifecycle
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/01_create_app/" title="Create App - Application Lifecycle" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/01_create_app/">
          Create App - Application Lifecycle
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/02_deploy_aap/" title="Deploy Ansible Automation Platform 2 (AAP2)" class="dd-item
        
        active
        
        ">
      <a href="/02_application_lifecycle/02_deploy_aap/">
          Deploy Ansible Automation Platform 2 (AAP2)
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/03_deploy_snow_dev/" title="Deploy a Service Now Developer Instance" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/03_deploy_snow_dev/">
          Deploy a Service Now Developer Instance
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/04_snow_change_request/" title="Trigger a ServiceNow Change Request via Ansible" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/04_snow_change_request/">
          Trigger a ServiceNow Change Request via Ansible
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/05_create_aap_creds/" title="Create Ansible Automation Platform Credentials" class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/05_create_aap_creds/">
          Create Ansible Automation Platform Credentials
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/02_application_lifecycle/06_integrated_app_deployment/" title="Integrated Application Deployment [ACM/AAP2] " class="dd-item
        
        
        
        ">
      <a href="/02_application_lifecycle/06_integrated_app_deployment/">
          Integrated Application Deployment [ACM/AAP2] 
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/03_governance/" title="RHACM Governance" class="dd-item
        
        
        
        ">
      <a href="/03_governance/">
          RHACM Governance
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/03_governance/01_rhacm_policies/" title="RHACM Policies" class="dd-item
        
        
        
        ">
      <a href="/03_governance/01_rhacm_policies/">
          RHACM Policies
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/04_observability/" title="Observability" class="dd-item
        
        
        
        ">
      <a href="/04_observability/">
          Observability
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/04_observability/02_grafana_integration/" title="Grafana Integration" class="dd-item
        
        
        
        ">
      <a href="/04_observability/02_grafana_integration/">
          Grafana Integration
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/04_observability/01_create_s3_bucket/" title="Create_s3_bucket" class="dd-item
        
        
        
        ">
      <a href="/04_observability/01_create_s3_bucket/">
          Create_s3_bucket
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/06_appendix/" title="Appendix" class="dd-item
        
        
        
        ">
      <a href="/06_appendix/">
          Appendix
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/06_appendix/01_import_kubernetes_cluster/" title="Import Kubernetes" class="dd-item
        
        
        
        ">
      <a href="/06_appendix/01_import_kubernetes_cluster/">
          Import Kubernetes
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>RHACM</a> > <a href='/02_application_lifecycle/'>Application Lifecycle</a> > Deploy Ansible Automation Platform 2 (AAP2)
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#deploying-ansible-automation-platform-2">Deploying Ansible Automation Platform 2</a>
      <ul>
        <li><a href="#1-install-the-operator">1. Install the Operator</a></li>
      </ul>
    </li>
    <li><a href="#deploy-the-automation-controller">Deploy the Automation Controller</a></li>
    <li><a href="#3-access-the-aap-dashboard">3. Access the AAP dashboard</a></li>
    <li><a href="#4-configure-aap">4. Configure AAP</a></li>
    <li><a href="#5-generate-a-token-for-acm">5. Generate a token for ACM</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Deploy Ansible Automation Platform 2 (AAP2)
            </h1>
          

        



	<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="deploying-ansible-automation-platform-2">Deploying Ansible Automation Platform 2</h2>
<p>The purpose of this exercise is to deploy an Ansible Automation Platform and the Automation
Controller (formerly known as Ansible Tower) and integrate it with RHACM to perform pre/post
tasks within the application lifecycle engine. The prehook and posthook task allows you to
trigger an Ansible playbook before and after the application is deployed, respectively. Let’s get
started with installing the Ansible Automation Platform (AAP) operator.</p>
<h3 id="1-install-the-operator">1. Install the Operator</h3>
<p><img src="/images/202_10.png" alt="Install Update"></p>
<p>For this exercise, we’ll start by accessing the Operator Hub in the OpenShift
console(local-cluster/ACM Hub Cluster) to deploy AAP. So, for this, go to the Operator Hub
and select the Ansible Automation Platform.</p>
<p>Make sure to select channel stable-2.4-cluster-scoped and click INSTALL.
After a couple of minutes, the APP operator installation will finish. Verify that pods are running
by either accessing Workloads → Pods under the AAP namespace, or by running this
command in the bastion machine:</p>
<pre tabindex="0"><code>oc get pods -n aap
</code></pre><p>There should be 4 pods in a running state.</p>
<h2 id="deploy-the-automation-controller">Deploy the Automation Controller</h2>
<p>After the operator is successfully deployed, we’ll need to have the Automation Controller
instance. Access the AAP operator dashboard(you can do this by clicking on Installed Operators
and clicking on the AAP Operator), click in the Automation Controller tab. Then click on Create
AutomationController:</p>
<p><img src="/images/202_11.png" alt="Automation Controller"></p>
<p>Now, a form will be presented to you. Just give your AutomationController instance a name, like
aap2, and hit CREATE. This installation will also take a couple of minutes.
Verify this installation, again, by checking the pods in the aap namespace. Now, there should be
7 pods in a running state.</p>
<pre tabindex="0"><code>oc get pods -n aap
</code></pre><h2 id="3-access-the-aap-dashboard">3. Access the AAP dashboard</h2>
<p>If everything was done correctly, shortly we’ll be able to see an AAP route deployed. Before
accessing the URL, still in the aap namespace, navigate over to Secrets and get the AAP
admin password in the secret <!-- raw HTML omitted -->-admin-password. In this case,
app2-admin-password.</p>
<p><img src="/images/202_12.png" alt="Automation Controller"></p>
<p>Click on the secret name and you will be able to copy the password at the bottom of the
following page.</p>
<p>Now we’re all set. Access <strong>Networking → Routes</strong>, and click on the AAP route.</p>
<p><strong>Note:</strong> you may see that <strong>AAP is starting up</strong> and upgrading components, while the <strong>WEB UI</strong>
is setting up. This should just take less than a minute.
Use “admin” as username and the retrieved secret as password to login to AAP.</p>
<h2 id="4-configure-aap">4. Configure AAP</h2>
<p>Now that you’re logged in, let’s proceed with the initial configuration.
First of all, when you click on the AAP url, you will be presented with a Subscription dialog
window. Click on username/password and provide your Red Hat credentials(from your account
in access.redhat.com[link], not Red Hat SSO). You’ll need an Ansible subscription in order to be
able to use it. Feel free to use one of your trials and/or the employee SKU.</p>
<p><img src="/images/202_13.png" alt="Welcome AAP"></p>
<p>Select one and click <strong>NEXT</strong>.</p>
<p>Disable the User Analytics and the Automation Analytics for AAP, we don’t need those for our
example. Click <strong>NEXT</strong>.</p>
<p><img src="/images/202_14.png" alt="Welcome AAP"></p>
<p>Lastly, accept the end user license agreement by clicking on <strong>SUBMIT</strong>.</p>
<h2 id="5-generate-a-token-for-acm">5. Generate a token for ACM</h2>
<p>If everything was done correctly it will redirect to the controller page. In the Ansible dashboard,
generate a token for the admin user. Go to Users, click admin, select TOKENS, then click the
ADD button. Add a short description “Token for use by ACM”, update the SCOPE to Write,
then click <strong>SAVE</strong>.</p>
<p><strong>ATTENTION!</strong> Save the token value to a text file, you will need this token later.</p>
<p><img src="/images/202_15.png" alt="Create ACM Token"></p>
<p><img src="/images/202_16.png" alt="Name ACM Token"></p>





<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/02_application_lifecycle/01_create_app/" title="Create App - Application Lifecycle"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/02_application_lifecycle/03_deploy_snow_dev/" title="Deploy a Service Now Developer Instance" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1698350138"></script>
    <script src="/js/perfect-scrollbar.min.js?1698350138"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1698350138"></script>
    <script src="/js/jquery.sticky.js?1698350138"></script>
    <script src="/js/featherlight.min.js?1698350138"></script>
    <script src="/js/highlight.pack.js?1698350138"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1698350138"></script>
    <script src="/js/learn.js?1698350138"></script>
    <script src="/js/hugo-learn.js?1698350138"></script>
    
        
            <script src="/mermaid/mermaid.js?1698350138"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
